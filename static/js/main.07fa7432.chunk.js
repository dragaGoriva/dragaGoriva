(this.webpackJsonpdragagoriva=this.webpackJsonpdragagoriva||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),i=t(33),s=t.n(i),o=(t(91),t(9)),l=t(11),c=t(17),m=t(16),d=t(72),h=(t(92),t(59)),p=(t(93),t(2)),k=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"gasPrice",children:[Object(p.jsx)("div",{id:"price",children:this.props.price}),Object(p.jsx)("div",{id:"key",children:{95:"NMB-95",dizel:"Dizel",98:"NMB-98",100:"NMB-100",dizelpremium:"Dizel Premium",avtoplinlpg:"Avtoplin LPG",KOEL:"Ekstra lahko kurilno olje"}[this.props.gasKey.replace("-","")]})]})}}]),t}(n.a.Component),u=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).selection=function(){e.props.onSelectStation(e.props.stationData)},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"Station",onClick:this.selection,style:this.props.selectedId===this.props.stationData.pk?{backgroundColor:"#d3d3d3"}:{},children:[Object(p.jsxs)("div",{id:"Name",children:[this.props.stationData.name," "]}),Object(p.jsx)("div",{id:"Address",children:this.props.stationData.address}),Object(p.jsx)("div",{className:"prices",children:Object.keys(this.props.stationData.prices[this.props.stationData.prices.length-1]).map((function(a){if(null!=e.props.stationData.prices[e.props.stationData.prices.length-1][a]&&"dateRecorded"!==a)return Object(p.jsx)(k,{gasKey:a,price:e.props.stationData.prices[e.props.stationData.prices.length-1][a]})}))})]})}}]),t}(n.a.Component),g=t(139),v=t(145),j=t(141),b=t(142),f=t(140),O=t(143),_=t(136),x=t(138),y=t(148),S=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(o.a)(this,t),(r=a.call(this,e)).getGeoLocation=function(){var e=void 0,a=void 0;console.log("aa"),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords.latitude),console.log(t.coords.longitude),e=t.coords.latitude,a=t.coords.longitude,r.setState({myPos:[e,a]})}))},r.clearGeo=function(){r.setState({myPos:void 0})},r.selectStation=function(e){console.log("data",e),r.setState({selected:e,selectedId:e.pk})},r.state={searchString:"",selectedId:0,selected:{address:"",franchise:-1,lat:-1,lng:-1,name:"",pk:-1,prices:[{}]},stationName:[],fuelType:[],myPos:void 0,distanceValue:0,allData:void 0},r}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;void 0===this.state.allData&&fetch("https://raw.githubusercontent.com/dragaGoriva/dragaGoriva/main/src/jsonDataAll.json").then((function(e){return e.json()})).then((function(a){e.setState({allData:a}),e.setState({selected:a.results[0]}),e.setState({selectedId:a.results[0]}.pk)}))}},{key:"handleSearchChange",value:function(e){var a=e.target.value;this.setState({searchString:a})}},{key:"handleChange",value:function(e,a){var t=this.state.stationName,r=a.props.value;console.log(t.indexOf(r)),-1===t.indexOf(r)?t.push(r):t.splice(t.indexOf(r),1),console.log(t),this.setState({stationName:t})}},{key:"handleChangeFuel",value:function(e,a){var t=this.state.fuelType,r=a.props.value;console.log(t.indexOf(r)),-1===t.indexOf(r)?t.push(r):t.splice(t.indexOf(r),1),console.log(t),this.setState({fuelType:t})}},{key:"handleChangeDistance",value:function(e){this.setState({distanceValue:e.target.value})}},{key:"CalculateDistance",value:function(e,a){var t=this.state.myPos[0],r=this.state.myPos[1],n=this.state.distanceValue,i=Math.sin(t*Math.PI)*Math.sin(e*Math.PI)+Math.cos(t*Math.PI)*Math.cos(e*Math.PI)*Math.cos(Math.abs(r-a)*Math.PI);return 6370981.162*Math.acos(i)/100<n}},{key:"render",value:function(){var e=this,a=[{name:"NMB-95",key:"95"},{name:"Dizel",key:"dizel"},{name:"NMB-98",key:"98"},{name:"NMB-100",key:"100"},{name:"Dizel Premium",key:"dizel-premium"},{name:"Avtoplin LPG",key:"avtoplin-lpg"},{name:"Ekstra lahko kurilno olje",key:"KOEL"}],t={labels:this.state.selected.prices.map((function(e){return e.dateRecorded})),datasets:[{label:"Bencin 95",data:this.state.selected.prices.map((function(e){return e[95]})),fill:!1,backgroundColor:"red",borderColor:"red"},{label:"Bencin 100",data:this.state.selected.prices.map((function(e){return e[100]})),fill:!1,backgroundColor:"blue",borderColor:"blue"},{label:"dizel",data:this.state.selected.prices.map((function(e){return e.dizel})),fill:!1,backgroundColor:"green",borderColor:"green"}]},r=void 0!==this.state.allData?this.state.allData.results.filter((function(a,t){var r=[!1];return e.state.fuelType.length>0&&(r=e.state.fuelType.map((function(e,t){if(null!=a.prices[a.prices.length-1][e])return!0}))),r=r.includes(!0),void 0!==e.state.myPos&&console.log(e.CalculateDistance(a.lat,a.lng)),(a.name.toLocaleLowerCase().includes(e.state.searchString.toLocaleLowerCase())||a.address.toLocaleLowerCase().includes(e.state.searchString.toLocaleLowerCase()))&&(!(e.state.stationName.length>0)||-1!==e.state.stationName.indexOf(a.franchise))&&(!(e.state.fuelType.length>0)||r)&&(void 0===e.state.myPos||e.CalculateDistance(a.lat,a.lng))})):void 0;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"leftSide",children:[Object(p.jsxs)("div",{className:"leftSearch",children:[Object(p.jsx)(g.a,{id:"standard-basic",label:"I\u0161\u010di",variant:"outlined",style:{margin:"8px",background:"white"},onChange:function(a){return e.handleSearchChange(a)}}),Object(p.jsxs)(f.a,{sx:{m:1},style:{background:"white"},children:[Object(p.jsx)(j.a,{id:"demo-multiple-checkbox-label",shrink:this.state.stationName.length>0,children:"Prodajalec"}),Object(p.jsx)(_.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,fullWidth:!0,value:this.state.stationName,onChange:function(a,t){return e.handleChange(a,t)},input:Object(p.jsx)(v.a,{label:"Prodajalec",notched:this.state.stationName.length>0}),renderValue:function(e){var a=[];return e.forEach((function(e){var t=h.find((function(a){return a.pk===e}));a.push(t.name)})),a.join(", ")},MenuProps:{style:{maxHeight:"70vh"}},children:h.map((function(a){return Object(p.jsxs)(b.a,{value:a.pk,children:[Object(p.jsx)(x.a,{checked:e.state.stationName.indexOf(a.pk)>-1}),Object(p.jsx)(O.a,{primary:a.name})]},a.name)}))})]}),Object(p.jsxs)(f.a,{sx:{m:1},style:{background:"white"},children:[Object(p.jsx)(j.a,{id:"demo-multiple-checkbox-label",shrink:this.state.fuelType.length>0,children:"Tip goriva"}),Object(p.jsx)(_.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,fullWidth:!0,value:this.state.fuelType,onChange:function(a,t){return e.handleChangeFuel(a,t)},input:Object(p.jsx)(v.a,{label:"Prodajalec",notched:this.state.fuelType.length>0}),renderValue:function(e){var t=[];return e.forEach((function(e){var r=a.find((function(a){return a.key===e}));t.push(r.name)})),t.join(", ")},children:a.map((function(a){return Object(p.jsxs)(b.a,{value:a.key,children:[Object(p.jsx)(x.a,{checked:e.state.fuelType.indexOf(a.key)>-1}),Object(p.jsx)(O.a,{primary:a.name})]},a.name)}))})]}),Object(p.jsxs)("div",{style:{margin:"0px auto",display:"flex",alignItems:"center"},children:[Object(p.jsxs)(f.a,{fullWidth:!0,children:[Object(p.jsx)(j.a,{id:"demo-simple-select-label",children:"Oddaljenost"}),Object(p.jsx)(_.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.distanceValue,label:"Oddaljenost",onChange:function(a){return e.handleChangeDistance(a)},children:[{key:9999999999999,name:"Prika\u017ei vse"},{key:1e3,name:"1 km"},{key:5e3,name:"5 km"},{key:1e4,name:"10 km"},{key:15e3,name:"15 km"},{key:2e4,name:"20 km"},{key:5e4,name:"50 km"},{key:1e5,name:"100 km"}].map((function(e){return Object(p.jsx)(b.a,{value:e.key,children:e.name})}))})]}),void 0!==this.state.myPos?Object(p.jsx)(y.a,{variant:"contained",onClick:this.clearGeo,color:"error",style:{margin:"12px"},children:"Po\u010disti"}):Object(p.jsx)(y.a,{variant:"contained",onClick:this.getGeoLocation,style:{margin:"12px"},children:"Moja lokacija"})]}),Object(p.jsx)("div",{style:{marginBottom:"8px"}})]}),Object(p.jsx)("div",{className:"StationWrap",children:void 0!==r?r.map((function(a,t){return Object(p.jsx)(u,{stationData:a,onSelectStation:e.selectStation,selectedId:e.state.selectedId})})):Object(p.jsx)("div",{})})]}),Object(p.jsxs)("div",{className:"chart",children:[Object(p.jsx)("div",{children:this.state.selected.name}),void 0===this.state.allData?Object(p.jsx)("div",{}):Object(p.jsx)(d.a,{data:t,options:{scales:{y:{beginAtZero:!1}}}})]})]})}}]),t}(n.a.Component),M=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,149)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,i=a.getLCP,s=a.getTTFB;t(e),r(e),n(e),i(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root")),M()},59:function(e){e.exports=JSON.parse('[{"pk":1,"name":"Petrol","marker":"https://goriva.si/media/images/markers/Pin_goriva-si_Petrol_P_osnovni.png","marker_hover":"https://goriva.si/media/images/markers/Pin_goriva-si_Petrol_P_hover.png"},{"pk":2,"name":"OMV Slovenija","marker":"https://goriva.si/media/images/markers/omv.png","marker_hover":"https://goriva.si/media/images/markers/omv_As5TQUA.png"},{"pk":3,"name":"M \u2013 ENERGIJA","marker":"https://goriva.si/media/images/markers/Maxen_Marker.png","marker_hover":"https://goriva.si/media/images/markers/Maxen_Marker_T09VNh5.png"},{"pk":4,"name":"MOL","marker":"https://goriva.si/media/images/markers/mol.png","marker_hover":"https://goriva.si/media/images/markers/mol_NNpzHmw.png"},{"pk":5,"name":"Shell Adria","marker":"https://goriva.si/media/images/markers/Shell_Icon_Marker2-02.png","marker_hover":"https://goriva.si/media/images/markers/Shell_Icon_Marker2-02_6GShYSj.png"},{"pk":6,"name":"EKO-NAFTA","marker":"https://goriva.si/media/images/markers/marker_eko_nafta.png","marker_hover":"https://goriva.si/media/images/markers/marker_hover_eko_nafta.png"},{"pk":7,"name":"LOGO","marker":"https://goriva.si/media/images/markers/marker1.png","marker_hover":"https://goriva.si/media/images/markers/marker_hover1.png"},{"pk":9,"name":"TehnoSTOR","marker":null,"marker_hover":null},{"pk":10,"name":"Butan plin","marker":"https://goriva.si/media/images/markers/marker-ButanPlin.png","marker_hover":"https://goriva.si/media/images/markers/marker-ButanPlin_2vSxoE6.png"},{"pk":11,"name":"ECO OIL","marker":null,"marker_hover":null},{"pk":12,"name":"INA Slovenija","marker":null,"marker_hover":null},{"pk":13,"name":"FE - Trading","marker":null,"marker_hover":null},{"pk":14,"name":"West oil","marker":null,"marker_hover":null},{"pk":15,"name":"DISCONT Oil","marker":"https://goriva.si/media/images/markers/novi_logo.png","marker_hover":"https://goriva.si/media/images/markers/novi_logo_6itifJQ.png"},{"pk":16,"name":"Agas","marker":"https://goriva.si/media/images/markers/agas.png","marker_hover":"https://goriva.si/media/images/markers/agas_QYekoep.png"},{"pk":17,"name":"HOJNIK Oil","marker":"https://goriva.si/media/images/markers/hojnik_oil.png","marker_hover":"https://goriva.si/media/images/markers/hojnik_oil_BhFK2DM.png"},{"pk":18,"name":"Merkantil","marker":null,"marker_hover":null},{"pk":19,"name":"LOGO BENCINSKI SERVISI","marker":"https://goriva.si/media/images/markers/marker1_cMK7NAq.png","marker_hover":"https://goriva.si/media/images/markers/marker_hover1_VZePnhy.png"},{"pk":21,"name":"Mini Marketing d.o.o. Stranice","marker":null,"marker_hover":null},{"pk":22,"name":"BS Demol","marker":"https://goriva.si/media/images/markers/Lokacija_logo_DEMOL_blue.png","marker_hover":"https://goriva.si/media/images/markers/Lokacija_logo_DEMOL_blue_mivj8hv.png"},{"pk":23,"name":"Panvita kmetijstvo","marker":null,"marker_hover":null},{"pk":24,"name":"Postonjske mesnine oil","marker":null,"marker_hover":null},{"pk":25,"name":"URMA","marker":null,"marker_hover":null},{"pk":26,"name":"EKSTRA OLJE","marker":null,"marker_hover":null},{"pk":27,"name":"AVTOTRANSPORT KOVA\u010cI\u010c","marker":null,"marker_hover":null},{"pk":28,"name":"BENCINSKI SERVIS BU\u010cAR","marker":null,"marker_hover":null},{"pk":29,"name":"Mi oskrba","marker":"https://goriva.si/media/images/markers/markerMiOskrba_1.png","marker_hover":"https://goriva.si/media/images/markers/markerMiOskrba_1_DiETwTr.png"}]')},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){}},[[100,1,2]]]);
//# sourceMappingURL=main.07fa7432.chunk.js.map